<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">
    <title>K-Bank - Finance Moderne</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        // Initialiser le thème avant le rendu
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
    </script>
</head>
<body data-theme="dark">
    <!-- Page d'authentification -->
    <div class="auth-overlay" id="auth-overlay">
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-header-section">
                    <div class="auth-logo">K-BANK</div>
                    <div class="theme-toggle auth-theme-toggle" onclick="toggleTheme()" title="Basculer le thème">
                        <div class="theme-toggle-slider">
                            <i class="fas fa-sun theme-icon light"></i>
                            <i class="fas fa-moon theme-icon dark"></i>
                        </div>
                    </div>
                </div>
                <div class="auth-subtitle">Banque digitale sécurisée</div>
                
                <h2 class="auth-title">Entrez votre code PIN</h2>
                
                <div class="pin-container">
                    <input type="password" class="pin-input" maxlength="1" readonly>
                    <input type="password" class="pin-input" maxlength="1" readonly>
                    <input type="password" class="pin-input" maxlength="1" readonly>
                    <input type="password" class="pin-input" maxlength="1" readonly>
                    <input type="password" class="pin-input" maxlength="1" readonly>
                    <input type="password" class="pin-input" maxlength="1" readonly>
                </div>

                <div class="keypad">
                    <button class="key-button" data-key="1">1</button>
                    <button class="key-button" data-key="2">2</button>
                    <button class="key-button" data-key="3">3</button>
                    <button class="key-button" data-key="4">4</button>
                    <button class="key-button" data-key="5">5</button>
                    <button class="key-button" data-key="6">6</button>
                    <button class="key-button" data-key="7">7</button>
                    <button class="key-button" data-key="8">8</button>
                    <button class="key-button" data-key="9">9</button>
                    <button class="key-button" style="visibility: hidden;"></button>
                    <button class="key-button" data-key="0">0</button>
                    <button class="key-button delete" data-key="delete">
                        <i class="fas fa-backspace"></i>
                    </button>
                </div>

                <div class="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 15px;">Vérification en cours...</p>
                </div>

                <div class="error-message">Code PIN incorrect. Veuillez réessayer.</div>

                <div class="auth-footer">
                    <i class="fas fa-shield-alt"></i>
                    Votre sécurité est notre priorité
                </div>
            </div>
        </div>
    </div>

    <div class="app-container" id="app-container" style="display: none;">
        <!-- En-tête -->
        <div class="header">
            <div class="header-title">KB</div>
            <div class="header-actions">
                <div class="header-icon" onclick="switchTab('profile')">
                    <i class="fas fa-user"></i>
                </div>
                <div class="notification-bell" onclick="switchTab('notifications')">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </div>
            </div>
        </div>

        <!-- Contenu principal -->
        <div class="content" id="content">
            <!-- Page Accueil -->
            <div class="page home-page active" id="home-page">
                <!-- Carte de solde principale responsive -->
                <div class="main-balance-card">
                    <div class="clouds-background"></div>
                    <div class="balance-content">
                        <div class="balance-title">Solde principal</div>
                        <div class="balance-amount"><span class="currency-symbol">F</span> <span class="currency-code">CFA</span> 780 245,<small>00</small></div>
                        <div class="balance-details">
                            <div class="balance-detail">
                                <div>Revenus mensuels</div>
                                <div class="detail-value"><span class="currency-symbol">F</span> <span class="currency-code">CFA</span> 245 200,<small>00</small></div>
                            </div>
                            <div class="divider"></div>
                            <div class="balance-detail">
                                <div>Dépenses mensuelles</div>
                                <div class="detail-value"><span class="currency-symbol">F</span> <span class="currency-code">CFA</span> 133 274,<small>00</small></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <div class="action-card" onclick="switchTab('transfer')">
                        <div class="action-icon">
                            <i class="fas fa-exchange-alt"></i>
                        </div>
                        <div class="action-label">Transfert</div>
                    </div>
                    <div class="action-card" onclick="switchTab('iban')">
                        <div class="action-icon">
                            <i class="fas fa-university"></i>
                        </div>
                        <div class="action-label">IBAN</div>
                    </div>
                    <div class="action-card" onclick="switchTab('topup')">
                        <div class="action-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="action-label">Recharger</div>
                    </div>
                    <div class="action-card" onclick="switchTab('cards')">
                        <div class="action-icon">
                            <i class="fas fa-credit-card"></i>
                        </div>
                        <div class="action-label">Cartes</div>
                    </div>
                </div>

                <div class="transactions-section">
                    <div class="section-header">
                        <h3>Dernières transactions</h3>
                    </div>
                    <div class="transactions-list" id="transactions-list"></div>
                </div>
            </div>

            <!-- Page Cartes -->
            <div class="page cards-page" id="cards-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Mes cartes</h2>
                </div>
                
                <div class="cards-container">
                    <!-- Carte principale moderne -->
                    <div class="modern-card-container">
                        <!-- Indicateur d'état de la carte - SORTI de la carte -->
                        <div class="card-status-indicator" id="card-status-indicator" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 99999 !important; pointer-events: none;">
                            <div class="status-icon frozen-icon" id="frozen-icon" style="display: none; width: 60px; height: 60px; border-radius: 50%; background: rgba(173, 216, 230, 0.95) !important; border: 3px solid white; box-shadow: 0 4px 15px rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 99999 !important;">
                                <span style="font-size: 28px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.7));">❄️</span>
                            </div>
                            <div class="status-icon blocked-icon" id="blocked-icon" style="display: none; width: 60px; height: 60px; border-radius: 50%; background: rgba(220, 53, 69, 0.95) !important; border: 3px solid white; box-shadow: 0 4px 15px rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 99999 !important;">
                                <span style="font-size: 32px; color: white; font-weight: bold; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.7));">∅</span>
                            </div>
                        </div>
                        <div class="modern-card" id="main-card">
                            <div class="modern-card-face modern-card-front">
                                <div class="bank-name-left">K-BANK</div>
                                <div class="logo-puce">
                                    <img src="assets/chip.svg" alt="Chip" class="chip-image">
                                    <div class="bank-logo">VISA</div>
                                </div>
                                <div class="modern-card-number">•••• •••• •••• 4562</div>
                                <div class="card-bottom-info">
                                    <div class="card-holder-info">
                                        <div class="label">Titulaire</div>
                                        <div class="card-holder-name">GODWIN BATOLA</div>
                                    </div>
                                    <div class="card-expiry-info">
                                        <div class="label">Expire fin</div>
                                        <div class="card-expiry-date">09/25</div>
                                    </div>
                                    <div class="card-cvc-info">
                                        <div class="label">CVC</div>
                                        <div class="card-cvc">•••</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Actions cartes -->
                    <div class="card-actions">
                        <button class="card-action" onclick="toggleCardFreeze()">
                            <i class="fas fa-snowflake"></i>
                            <span id="freeze-text">Geler</span>
                        </button>
                        <button class="card-action" onclick="switchTab('order-card')">
                            <i class="fas fa-plus-circle"></i>
                            <span>Commander</span>
                        </button>
                    </div>
                    
                    <!-- Options de gestion de la carte -->
                    <div class="section-header">
                        <h3>Paramètres de la carte</h3>
                    </div>
                    
                    <div class="card-item" onclick="adjustPaymentLimit()">
                        <div class="card-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="card-info">
                            <div class="card-name">Plafond de paiement</div>
                            <div class="card-meta">F <h6>CFA</h6> 500 000 / jour</div>
                        </div>
                        <div class="card-toggle">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>

                    <div class="card-item" onclick="adjustWithdrawalLimit()">
                        <div class="card-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="card-info">
                            <div class="card-name">Plafond de retrait</div>
                            <div class="card-meta">F <h6>CFA</h6> 200 000 / jour</div>
                        </div>
                        <div class="card-toggle">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>

                    <div class="card-item" onclick="temporaryBlockCard()">
                        <div class="card-icon">
                            <i class="fas fa-ban"></i>
                        </div>
                        <div class="card-info">
                            <div class="card-name">Bloquer la carte</div>
                            <div class="card-meta">Désactiver votre carte</div>
                        </div>
                        <div class="card-toggle">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page Commander une carte -->
            <div class="page order-card-page" id="order-card-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('cards')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Commander une carte</h2>
                </div>
                
                <div class="form-container">
                    <div class="card-options">
                        <div class="card-option selected">
                            <i class="fab fa-cc-visa"></i>
                            <span>Carte Visa</span>
                            <div class="card-price">Gratuite</div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Point de retrait</label>
                        <div class="input-field">
                            <select id="pickup-location" required>
                                <option value="" disabled selected>Choisir un point de retrait</option>
                                <option value="main">Agence K-BANK</option>
                                <option value="partner1">K-BANK partenaire 1 Bord de mer</option>
                                <option value="partner2">K-BANK partenaire 2 Centre-ville</option>
                                <option value="partner3">K-BANK partenaire 3 en face du consulat de France</option>
                                <option value="partner4">K-BANK partenaire marché Mont Bouet</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Date de livraison estimée</label>
                        <div class="delivery-info">
                            <i class="fas fa-truck"></i>
                            <span>5-7 jours ouvrables</span>
                        </div>
                    </div>
                    
                    <button class="primary-button" onclick="orderCard()">
                        <i class="fas fa-check-circle"></i> Commander la carte
                    </button>
                </div>
            </div>

            <!-- Page Plafond de Paiement -->
            <div class="page payment-limit-page" id="payment-limit-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('cards')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Plafond de paiement</h2>
                </div>
                
                <div class="form-container">
                    <div class="limit-info-card">
                        <div class="limit-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="limit-details">
                            <h3>Plafond actuel</h3>
                            <div class="current-limit">500 000 <span>FCFA / jour</span></div>
                            <div class="limit-status">
                                <i class="fas fa-check-circle"></i>
                                <span>Limite active</span>
                            </div>
                        </div>
                    </div>

                    <div class="limit-usage">
                        <h4>Utilisation aujourd'hui</h4>
                        <div class="usage-bar">
                            <div class="usage-progress" style="width: 35%"></div>
                        </div>
                        <div class="usage-text">175 000 FCFA utilisés sur 500 000 FCFA</div>
                    </div>

                    <div class="input-group">
                        <label>Nouveau plafond (FCFA)</label>
                        <div class="input-field">
                            <input type="number" placeholder="Entrez le nouveau montant" id="new-payment-limit" min="50000" max="1000000" step="25000">
                        </div>
                        <div class="input-hint">Minimum: 50 000 FCFA - Maximum: 1 000 000 FCFA</div>
                    </div>

                    <div class="preset-limits">
                        <h4>Plafonds suggérés</h4>
                        <div class="preset-buttons">
                            <button class="preset-btn" onclick="setPaymentLimit(250000)">250 000 FCFA</button>
                            <button class="preset-btn active" onclick="setPaymentLimit(500000)">500 000 FCFA</button>
                            <button class="preset-btn" onclick="setPaymentLimit(750000)">750 000 FCFA</button>
                            <button class="preset-btn" onclick="setPaymentLimit(1000000)">1 000 000 FCFA</button>
                        </div>
                    </div>

                    <div class="security-notice">
                        <i class="fas fa-shield-alt"></i>
                        <div class="notice-text">
                            <strong>Information importante</strong>
                            <p>Votre demande sera étudiée par nos équipes. La modification de votre plafond prendra effet uniquement si elle est acceptée. Vous recevrez une notification de confirmation du traitement de votre demande.</p>
                        </div>
                    </div>
                    
                    <button class="primary-button" onclick="updatePaymentLimit()">
                        <i class="fas fa-paper-plane"></i> Faire la demande
                    </button>
                </div>
            </div>

            <!-- Page Plafond de Retrait -->
            <div class="page withdrawal-limit-page" id="withdrawal-limit-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('cards')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Plafond de retrait</h2>
                </div>
                
                <div class="form-container">
                    <div class="limit-info-card">
                        <div class="limit-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="limit-details">
                            <h3>Plafond actuel</h3>
                            <div class="current-limit">200 000 <span>FCFA / jour</span></div>
                            <div class="limit-status">
                                <i class="fas fa-check-circle"></i>
                                <span>Limite active</span>
                            </div>
                        </div>
                    </div>

                    <div class="limit-usage">
                        <h4>Retraits aujourd'hui</h4>
                        <div class="usage-bar">
                            <div class="usage-progress withdrawal-progress" style="width: 60%"></div>
                        </div>
                        <div class="usage-text">120 000 FCFA retirés sur 200 000 FCFA</div>
                    </div>

                    <div class="atm-locations">
                        <h4>Distributeurs disponibles</h4>
                        <div class="atm-list">
                            <div class="atm-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="atm-info">
                                    <span class="atm-name">Centre-ville Libreville</span>
                                    <span class="atm-status available">Disponible 24h/24</span>
                                </div>
                            </div>
                            <div class="atm-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="atm-info">
                                    <span class="atm-name">Marché Mont-Bouet</span>
                                    <span class="atm-status available">Disponible 24h/24</span>
                                </div>
                            </div>
                            <div class="atm-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <div class="atm-info">
                                    <span class="atm-name">Bord de mer</span>
                                    <span class="atm-status maintenance">Maintenance (16h-18h)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Nouveau plafond (FCFA)</label>
                        <div class="input-field">
                            <input type="number" placeholder="Entrez le nouveau montant" id="new-withdrawal-limit" min="25000" max="500000" step="25000">
                        </div>
                        <div class="input-hint">Minimum: 25 000 FCFA - Maximum: 500 000 FCFA</div>
                    </div>

                    <div class="preset-limits">
                        <h4>Plafonds suggérés</h4>
                        <div class="preset-buttons">
                            <button class="preset-btn" onclick="setWithdrawalLimit(100000)">100 000 FCFA</button>
                            <button class="preset-btn active" onclick="setWithdrawalLimit(200000)">200 000 FCFA</button>
                            <button class="preset-btn" onclick="setWithdrawalLimit(300000)">300 000 FCFA</button>
                            <button class="preset-btn" onclick="setWithdrawalLimit(500000)">500 000 FCFA</button>
                        </div>
                    </div>

                    <div class="security-notice">
                        <i class="fas fa-shield-alt"></i>
                        <div class="notice-text">
                            <strong>Information importante</strong>
                            <p>Votre demande sera étudiée par nos équipes. La modification de votre plafond prendra effet uniquement si elle est acceptée. Vous recevrez une notification de confirmation du traitement de votre demande.</p>
                        </div>
                    </div>
                    
                    <button class="primary-button" onclick="updateWithdrawalLimit()">
                        <i class="fas fa-paper-plane"></i> Faire la demande
                    </button>
                </div>
            </div>

            <!-- Page Informations Personnelles -->
            <div class="page personal-info-page" id="personal-info-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('profile')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Informations Personnelles</h2>
                </div>
                
                <div class="form-container">
                    <div class="input-group">
                        <label>Nom complet</label>
                        <div class="input-field">
                            <input type="text" value="Godwin Batola" readonly>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Email</label>
                        <div class="input-field">
                            <input type="email" value="batolaalpha@gmail.com" readonly>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Téléphone</label>
                        <div class="input-field">
                            <input type="tel" placeholder="+237 6XX XXX XXX">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Adresse</label>
                        <div class="input-field">
                            <textarea placeholder="Votre adresse complète"></textarea>
                        </div>
                    </div>
                    
                    <button class="primary-button">
                        <i class="fas fa-save"></i> Enregistrer les modifications
                    </button>
                </div>
            </div>

            <!-- Page Sécurité -->
            <div class="page security-page" id="security-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('profile')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Sécurité</h2>
                </div>
                
                <div class="security-options">
                    <div class="security-item" onclick="changePassword()">
                        <div class="security-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="security-info">
                            <div class="security-title">Changer le mot de passe</div>
                            <div class="security-description">Mettre à jour votre mot de passe</div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                    
                    <div class="security-item" onclick="toggle2FA()">
                        <div class="security-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="security-info">
                            <div class="security-title">Authentification à deux facteurs</div>
                            <div class="security-description">2FA activé</div>
                        </div>
                        <div class="toggle-switch">
                            <input type="checkbox" id="2fa-toggle" checked>
                            <label for="2fa-toggle"></label>
                        </div>
                    </div>
                    
                    <div class="security-item" onclick="viewSessions()">
                        <div class="security-icon">
                            <i class="fas fa-desktop"></i>
                        </div>
                        <div class="security-info">
                            <div class="security-title">Sessions actives</div>
                            <div class="security-description">2 appareils connectés</div>
                        </div>
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </div>
            </div>

            <!-- Page Notifications -->
            <div class="page notifications-page" id="notifications-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Notifications</h2>
                    <div class="header-actions">
                        <button class="mark-all-read-btn" onclick="markAllAsRead()" title="Marquer tout comme lu">
                            <i class="fas fa-check-double"></i>
                        </button>
                    </div>
                </div>
                
                <div class="notifications-content">
                    <!-- Section des notifications non lues -->
                    <div class="notification-section" id="unread-section">
                        <div class="section-header">
                            <h3>
                                <i class="fas fa-bell"></i>
                                Nouvelles notifications
                                <span class="unread-count" id="unread-count">0</span>
                            </h3>
                        </div>
                        <div class="notifications-list" id="unread-notifications">
                            <!-- Notifications non lues -->
                        </div>
                    </div>

                    <!-- Section des notifications lues -->
                    <div class="notification-section" id="read-section">
                        <div class="section-header">
                            <h3>
                                <i class="fas fa-check-circle"></i>
                                Notifications lues
                            </h3>
                        </div>
                        <div class="notifications-list" id="read-notifications">
                            <!-- Notifications lues -->
                        </div>
                    </div>

                    <!-- État vide -->
                    <div class="empty-notifications" id="empty-notifications" style="display: none;">
                        <div class="empty-icon">
                            <i class="fas fa-bell-slash"></i>
                        </div>
                        <h3>Aucune notification</h3>
                        <p>Vous êtes à jour ! Aucune nouvelle notification pour le moment.</p>
                    </div>
                </div>
            </div>

            <!-- Page Profil -->
            <div class="page profile-page" id="profile-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Mon profil</h2>
                </div>
                
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="profile-name">Godwin Batola</div>
                    <div class="profile-email">batolaalpha@gmail.com</div>
                </div>
                
                <div class="profile-section">
                    <h3>Mon compte</h3>
                    <div class="profile-item" onclick="switchTab('edit-profile')">
                        <div class="item-icon">
                            <i class="fas fa-user-edit"></i>
                        </div>
                        <div class="item-info">
                            <div class="item-title">Modifier le profil</div>
                            <div class="item-subtitle">Mettre à jour vos informations</div>
                        </div>
                        <div class="item-action">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="profile-item" onclick="switchTab('personal-info')">
                        <div class="item-icon">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="item-info">
                            <div class="item-title">Informations personnelles</div>
                            <div class="item-subtitle">Voir vos données</div>
                        </div>
                        <div class="item-action">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                    
                    <div class="profile-item" onclick="switchTab('security')">
                        <div class="item-icon">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="item-info">
                            <div class="item-title">Sécurité</div>
                            <div class="item-subtitle">Mot de passe, 2FA</div>
                        </div>
                        <div class="item-action">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>

                    <div class="profile-item" onclick="switchTab('notifications')">
                        <div class="item-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="item-info">
                            <div class="item-title">Notifications</div>
                            <div class="item-subtitle">Personnaliser les alertes</div>
                        </div>
                        <div class="item-action">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
                
                <div class="logout-button" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Déconnexion</span>
                </div>
            </div>

            <!-- Page Modifier le Profil -->
            <div class="page edit-profile-page" id="edit-profile-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('profile')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Modifier le profil</h2>
                </div>
                
                <div class="edit-profile-container">
                    <!-- Photo de profil -->
                    <div class="profile-photo-section">
                        <div class="current-photo">
                            <div class="photo-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <button class="change-photo-btn" onclick="changeProfilePhoto()">
                                <i class="fas fa-camera"></i>
                                Changer la photo
                            </button>
                        </div>
                    </div>

                    <!-- Formulaire de modification -->
                    <form id="editProfileForm" class="edit-profile-form">
                        <div class="form-section">
                            <h3>Informations personnelles</h3>
                            
                            <div class="input-group">
                                <label>Prénom</label>
                                <div class="input-field">
                                    <input type="text" name="firstName" placeholder="Ex: Godwin" required>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Nom</label>
                                <div class="input-field">
                                    <input type="text" name="lastName" placeholder="Ex: Batola" required>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Email</label>
                                <div class="input-field">
                                    <input type="email" name="email" placeholder="Ex: godwin.batola@k-bank.ga" required>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Téléphone</label>
                                <div class="input-field">
                                    <input type="tel" name="phone" placeholder="Ex: +241 01 23 45 67" required>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Date de naissance</label>
                                <div class="input-field">
                                    <input type="date" name="birthDate" placeholder="1990-01-01">
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Nationalité</label>
                                <div class="input-field">
                                    <select name="nationality">
                                        <option value="">Choisir une nationalité</option>
                                        <option value="Gabonaise">Gabonaise</option>
                                        <option value="Française">Française</option>
                                        <option value="Camerounaise">Camerounaise</option>
                                        <option value="Autre">Autre</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label>Profession</label>
                                <div class="input-field">
                                    <input type="text" name="profession" placeholder="Ex: Entrepreneur">
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Adresse</h3>
                            
                            <div class="input-group">
                                <label>Adresse complète</label>
                                <div class="input-field">
                                    <textarea name="address" rows="3" placeholder="Ex: 123 Boulevard Leon Mba, Libreville"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Section Préférences -->
                        <div class="form-section">
                            <h3>Préférences</h3>
                            
                            <div class="preference-item">
                                <div class="preference-info">
                                    <div class="preference-title">Notifications par email</div>
                                    <div class="preference-desc">Recevoir des notifications sur votre email</div>
                                </div>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="notificationsPref">
                                    <label for="notificationsPref"></label>
                                </div>
                            </div>
                            
                            <div class="preference-item">
                                <div class="preference-info">
                                    <div class="preference-title">Notifications SMS</div>
                                    <div class="preference-desc">Recevoir des alertes par SMS</div>
                                </div>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="marketingPref">
                                    <label for="marketingPref"></label>
                                </div>
                            </div>
                            
                            <div class="preference-item">
                                <div class="preference-info">
                                    <div class="preference-title">Authentification biométrique</div>
                                    <div class="preference-desc">Utiliser l'empreinte digitale ou Face ID</div>
                                </div>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="biometricPref">
                                    <label for="biometricPref"></label>
                                </div>
                            </div>
                            
                            <div class="preference-item">
                                <div class="preference-info">
                                    <div class="preference-title">Sauvegarde automatique</div>
                                    <div class="preference-desc">Sauvegarder automatiquement vos préférences</div>
                                </div>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="autoSavePref">
                                    <label for="autoSavePref"></label>
                                </div>
                            </div>
                        </div>

                        <!-- Boutons d'action -->
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="cancelProfileEdit()">
                                <i class="fas fa-times"></i>
                                Annuler
                            </button>
                            <button type="submit" class="btn-primary">
                                <i class="fas fa-save"></i>
                                Enregistrer
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Page Virement -->
            <div class="page virement-page" id="virement-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Virement</h2>
                </div>
                
                <div class="form-container">
                    <div class="input-group">
                        <label>Bénéficiaire</label>
                        <div class="input-field">
                            <select id="virement-beneficiary-select">
                                <option value="" disabled selected>Sélectionner un bénéficiaire</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Montant (Fcfa)</label>
                        <div class="input-field">
                            <input type="number" placeholder="0,00" id="virement-amount">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Motif du virement</label>
                        <div class="input-field">
                            <input type="text" placeholder="Ex: Remboursement, Cadeau..." id="virement-reason">
                        </div>
                    </div>
                    
                    <button class="primary-button" onclick="confirmVirement()">
                        <i class="fas fa-paper-plane"></i> Effectuer le virement
                    </button>
                </div>
                
                <div class="beneficiaries-section">
                    <div class="section-header">
                        <h3>Bénéficiaires récents</h3>
                    </div>
                    
                    <div class="beneficiaries-list" id="virement-beneficiaries-list">
                        <!-- Les bénéficiaires seront ajoutés dynamiquement -->
                    </div>
                    
                    <button class="secondary-button" onclick="openAddVirementBeneficiaryModal()">
                        <i class="fas fa-plus-circle"></i> Ajouter un nouveau bénéficiaire
                    </button>
                </div>
            </div>

            <!-- Modal d'ajout de bénéficiaire -->
            <div class="modal-overlay" id="add-beneficiary-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">Nouveau bénéficiaire</h3>
                        <button class="modal-close" onclick="closeAddBeneficiaryModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="input-group">
                        <label>Nom complet</label>
                        <div class="input-field">
                            <input type="text" placeholder="Nom et prénom" id="beneficiary-name">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Numéro de compte</label>
                        <div class="input-field">
                            <input type="text" placeholder="Numéro de compte" id="beneficiary-account">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>Banque</label>
                        <div class="input-field">
                            <input type="text" placeholder="Nom de la banque" id="beneficiary-bank">
                        </div>
                    </div>
                    
                    <button class="primary-button" onclick="addBeneficiary()">
                        <i class="fas fa-check-circle"></i> Ajouter le bénéficiaire
                    </button>
                </div>
            </div>

            <!-- Page Mon IBAN -->
            <div class="page iban-page" id="iban-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Mon IBAN</h2>
                </div>

                <div class="iban-container">
                    <div class="iban-card">
                        <div class="iban-card-header">
                            <div class="kb-logo">KB</div>
                            <div class="card-type">Compte Courant</div>
                        </div>
                        
                        <div class="iban-number">
                            <div class="iban-label">IBAN</div>
                            <div class="iban-value">GA21 3042 0001 2345 6789 0304</div>
                            <button class="copy-button" onclick="copyIban()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>

                        <div class="account-details">
                            <div class="detail-item">
                                <div class="detail-label">Titulaire</div>
                                <div class="detail-value">Godwin Batola</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">BIC/SWIFT</div>
                                <div class="detail-value">KBANKGAXXX</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Banque</div>
                                <div class="detail-value">K-BANK GABON</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Adresse</div>
                                <div class="detail-value">Quartier Louis derrière Jeanne Ebori,
BP 20000 Libreville</div>
                            </div>
                        </div>
                    </div>

                    <div class="iban-actions">
                        <button class="action-button" onclick="shareIban()">
                            <i class="fas fa-share-alt"></i>
                            Partager
                        </button>
                        <button class="action-button" onclick="downloadIban()">
                            <i class="fas fa-download"></i>
                            Télécharger RIB
                        </button>
                    </div>
                </div>
            </div>

            <!-- Page Recharger -->
            <div class="page topup-page" id="topup-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Recharger</h2>
                </div>

                <div class="topup-welcome">
                    <h3>Recharger mon compte</h3>
                    <p>Choisissez votre mode de paiement préféré</p>
                </div>

                <div class="payment-methods">
                    <div class="payment-method" onclick="selectPaymentMethod('moov')">
                        <div class="payment-logo">
                            <img src="./assets/logos/moov.png" alt="Moov Money">
                        </div>
                        <span>Moov Money</span>
                        <div class="method-info">Instantané</div>
                    </div>

                    <div class="payment-method" onclick="selectPaymentMethod('airtel')">
                        <div class="payment-logo">
                            <img src="./assets/logos/airtel-money.png" alt="Airtel Money">
                        </div>
                        <span>Airtel Money</span>
                        <div class="method-info">Instantané</div>
                    </div>

                    <div class="payment-method" onclick="selectPaymentMethod('western')">
                        <div class="payment-logo">
                            <img src="./assets/logos/western-union.png" alt="Western Union">
                        </div>
                        <span>Western Union</span>
                        <div class="method-info">24-48h</div>
                    </div>

                    <div class="payment-method" onclick="selectPaymentMethod('card')">
                        <div class="payment-logo">
                            <i class="fas fa-credit-card" style="font-size: 32px; color: #3b82f6;"></i>
                        </div>
                        <span>Carte bancaire</span>
                        <div class="method-info">Instantané</div>
                    </div>
                </div>

                <div class="topup-form">
                    <div class="input-group">
                        <label>Montant à recharger</label>
                        <div class="input-field">
                            <input type="number" id="topup-amount" placeholder="Ex: 50000" min="1000" max="5000000" oninput="updateTopupButton()">
                            <span class="currency">F CFA</span>
                        </div>
                    </div>

                    <!-- Formulaire pour téléphone (Moov/Airtel/Western Union) -->
                    <div id="phone-form" style="display: none;">
                        <div class="input-group">
                            <label>Numéro de téléphone</label>
                            <div class="input-field">
                                <input type="tel" id="phone-number" placeholder="Ex: 07 XX XX XX XX" oninput="updateTopupButton()">
                            </div>
                        </div>
                    </div>

                    <!-- Formulaire pour carte bancaire -->
                    <div id="card-form" style="display: none;">
                        <div class="input-group">
                            <label>Numéro de carte</label>
                            <div class="input-field">
                                <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19" oninput="formatCardNumber(this)">
                                <i class="fas fa-credit-card input-icon"></i>
                            </div>
                        </div>

                        <div class="card-row">
                            <div class="input-group" style="flex: 1;">
                                <label>Date d'expiration</label>
                                <div class="input-field">
                                    <input type="text" id="card-expiry" placeholder="MM/AA" maxlength="5" oninput="formatCardExpiry(this)">
                                </div>
                            </div>
                            <div class="input-group" style="flex: 1; margin-left: 10px;">
                                <label>CVV</label>
                                <div class="input-field">
                                    <input type="text" id="card-cvv" placeholder="123" maxlength="3" oninput="formatCardCvv(this)">
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label>Nom sur la carte</label>
                            <div class="input-field">
                                <input type="text" id="card-name" placeholder="GODWIN BATOLA" oninput="updateTopupButton()" style="text-transform: uppercase;">
                            </div>
                        </div>
                    </div>

                    <button class="primary-button" onclick="processTopup()" id="topup-button" disabled>
                        <i class="fas fa-plus-circle"></i>
                        <span>Recharger maintenant</span>
                    </button>
                </div>
            </div>

            <!-- Page Transfert (nouvelle) -->
            <div class="page transfer-page" id="transfer-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>Transfert</h2>
                </div>

                <div class="transfer-welcome">
                    <h3>Transférer de l'argent</h3>
                    <p>Choisissez votre mode de transfert préféré</p>
                </div>

                <div class="payment-methods">
                    <div class="payment-method" onclick="selectTransferMethod('moov')">
                        <div class="payment-logo">
                            <img src="./assets/logos/moov.png" alt="Moov Money">
                        </div>
                        <span>Moov Money</span>
                        <div class="method-info">Instantané</div>
                    </div>

                    <div class="payment-method" onclick="selectTransferMethod('airtel')">
                        <div class="payment-logo">
                            <img src="./assets/logos/airtel-money.png" alt="Airtel Money">
                        </div>
                        <span>Airtel Money</span>
                        <div class="method-info">Instantané</div>
                    </div>

                    <div class="payment-method" onclick="selectTransferMethod('western')">
                        <div class="payment-logo">
                            <img src="./assets/logos/western-union.png" alt="Western Union">
                        </div>
                        <span>Western Union</span>
                        <div class="method-info">24-48h</div>
                    </div>
                </div>

                <div class="transfer-form">
                    <div class="input-group">
                        <label>Montant à transférer</label>
                        <div class="input-field">
                            <input type="number" id="transfer-amount" placeholder="0">
                            <span class="currency">F <h6>cfa</h6></span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Numéro de téléphone du destinataire</label>
                        <div class="input-field">
                            <input type="tel" id="transfer-phone-number" placeholder="+241">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Nom du destinataire</label>
                        <div class="input-field">
                            <input type="text" id="transfer-recipient-name" placeholder="Nom complet">
                        </div>
                    </div>

                    <button class="primary-button" onclick="processTransfer()" id="transfer-button" disabled>
                        <i class="fas fa-exchange-alt"></i>
                        <span>Transférer maintenant</span>
                    </button>
                </div>
            </div>
            
            <!-- Page Autres -->
            <div class="page others-page" id="others-page">
                <div class="page-header">
                    <h2>Services & Plus</h2>
                    <div class="header-subtitle">Découvrez tous<br>nos services</div>
                </div>

                <div class="others-container">
                    <!-- Support Section -->
                    <div class="services-section">
                        <div class="section-header">
                            <i class="fas fa-headset"></i>
                            <h3>Assistance</h3>
                        </div>
                        <div class="support-grid">
                            <button class="support-card" onclick="openFAQ()">
                                <div class="support-icon">
                                    <i class="fas fa-question-circle"></i>
                                </div>
                                <div class="support-content">
                                    <h4>FAQ</h4>
                                    <p>Questions fréquentes</p>
                                </div>
                            </button>

                            <button class="support-card" onclick="openChat()">
                                <div class="support-icon">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <div class="support-content">
                                    <h4>Chat en Direct</h4>
                                    <p>Assistance instantanée</p>
                                </div>
                                <div class="support-status online">
                                    <span></span>
                                </div>
                            </button>

                            <button class="support-card" onclick="callSupport()">
                                <div class="support-icon">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div class="support-content">
                                    <h4>Appel</h4>
                                    <p>+241 01 23 45 67</p>
                                </div>
                            </button>

                            <button class="support-card" onclick="scheduleCallback()">
                                <div class="support-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="support-content">
                                    <h4>Rendez-vous</h4>
                                    <p>Planifier un appel</p>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Paramètres rapides -->
                    <div class="services-section">
                        <div class="section-header">
                            <i class="fas fa-cog"></i>
                            <h3>Paramètres</h3>
                        </div>
                        <div class="settings-list">
                            <div class="setting-item" onclick="toggleNotifications()">
                                <div class="setting-icon">
                                    <i class="fas fa-bell"></i>
                                </div>
                                <div class="setting-content">
                                    <h4>Notifications</h4>
                                    <p>Alertes et rappels</p>
                                </div>
                                <div class="setting-toggle">
                                    <input type="checkbox" id="notif-toggle" checked>
                                    <label for="notif-toggle" class="toggle-slider"></label>
                                </div>
                            </div>

                            <div class="setting-item" onclick="toggleTheme()">
                                <div class="setting-icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div class="setting-content">
                                    <h4>Thème</h4>
                                    <p>Mode clair / sombre</p>
                                </div>
                                <div class="setting-toggle">
                                    <div class="theme-toggle-setting" id="theme-toggle-setting">
                                        <div class="theme-toggle-slider">
                                            <i class="fas fa-sun theme-icon light"></i>
                                            <i class="fas fa-moon theme-icon dark"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="setting-item" onclick="toggleBiometric()">
                                <div class="setting-icon">
                                    <i class="fas fa-fingerprint"></i>
                                </div>
                                <div class="setting-content">
                                    <h4>Biométrie</h4>
                                    <p>Empreinte digitale</p>
                                </div>
                                <div class="setting-toggle">
                                    <input type="checkbox" id="bio-toggle">
                                    <label for="bio-toggle" class="toggle-slider"></label>
                                </div>
                            </div>

                            <div class="setting-item" onclick="openSecuritySettings()">
                                <div class="setting-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <div class="setting-content">
                                    <h4>Sécurité</h4>
                                    <p>Codes et protection</p>
                                </div>
                                <div class="setting-arrow">
                                    <i class="fas fa-chevron-right"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bouton flottant K-Shop -->
            <div class="kshop-float" onclick="openKShop()">
                <div class="kshop-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="kshop-badge">3</div>
            </div>

            <!-- Nouvelle page K-Shop -->
            <div class="page kshop-page" id="kshop-page">
                <div class="page-header">
                    <button class="back-button" onclick="switchTab('home')">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2>K-Shop</h2>
                    <div class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-badge">3</span>
                    </div>
                </div>

                <div class="kshop-container">
                    <!-- Partenaires vedettes avec carrousel -->
                    <div class="featured-partners">
                        <h3>🌟 Partenaires vedettes</h3>
                        <div class="carousel-container">
                            <div class="partners-carousel" id="partners-carousel">
                                <!-- CKDO Gabon -->
                                <div class="partner-card featured active" data-partner="ckdo">
                                    <div class="partner-banner">
                                        <img src="assets/logos/shopping.png" alt="CKDO Gabon" class="banner-image">
                                        <div class="partner-overlay">
                                            <div class="partner-logo-text">CKDO</div>
                                        </div>
                                        <div class="partner-discount">-15%</div>
                                        <div class="partner-badge">POPULAIRE</div>
                                    </div>
                                    <div class="partner-info">
                                        <div class="partner-details">
                                            <h4>CKDO Gabon</h4>
                                            <p>Supermarché & Shopping</p>
                                            <div class="partner-rating">
                                                <span class="stars">★★★★★</span>
                                                <span class="rating-text">4.8/5</span>
                                            </div>
                                            <div class="partner-benefits">
                                                <span class="benefit">Réduction permanente</span>
                                                <span class="benefit">Cashback 2%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Mbolo -->
                                <div class="partner-card featured" data-partner="mbolo">
                                    <div class="partner-banner">
                                        <img src="assets/logos/mbolo.png" alt="Mbolo Restaurant" class="banner-image">
                                        <div class="partner-overlay">
                                            <div class="partner-logo-text">MBOLO</div>
                                        </div>
                                        <div class="partner-discount">-20%</div>
                                        <div class="partner-badge">NOUVEAU</div>
                                    </div>
                                    <div class="partner-info">
                                        <div class="partner-details">
                                            <h4>Mbolo</h4>
                                            <p>Restaurant Africain</p>
                                            <div class="partner-rating">
                                                <span class="stars">★★★★☆</span>
                                                <span class="rating-text">4.6/5</span>
                                            </div>
                                            <div class="partner-benefits">
                                                <span class="benefit">Plats traditionnels</span>
                                                <span class="benefit">Livraison gratuite</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- KFC Gabon -->
                                <div class="partner-card featured" data-partner="kfc">
                                    <div class="partner-banner">
                                        <img src="assets/logos/kfc.jpg" alt="KFC Gabon" class="banner-image">
                                        <div class="partner-overlay kfc-overlay">
                                            <div class="partner-logo-text">KFC</div>
                                        </div>
                                        <div class="partner-discount">-10%</div>
                                        <div class="partner-badge">HOT</div>
                                    </div>
                                    <div class="partner-info">
                                        <div class="partner-details">
                                            <h4>KFC Gabon</h4>
                                            <p>Fast Food International</p>
                                            <div class="partner-rating">
                                                <span class="stars">★★★★☆</span>
                                                <span class="rating-text">4.4/5</span>
                                            </div>
                                            <div class="partner-benefits">
                                                <span class="benefit">Menu famillial</span>
                                                <span class="benefit">Drive disponible</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Paul Gabon -->
                                <div class="partner-card featured" data-partner="paul">
                                    <div class="partner-banner">
                                        <img src="assets/paul.jpg" alt="Paul Gabon" class="banner-image">
                                        <div class="partner-overlay paul-overlay">
                                            <div class="partner-logo-text">PAUL</div>
                                        </div>
                                        <div class="partner-discount">-12%</div>
                                        <div class="partner-badge">PREMIUM</div>
                                    </div>
                                    <div class="partner-info">
                                        <div class="partner-details">
                                            <h4>Paul Gabon</h4>
                                            <p>Boulangerie & Pâtisserie</p>
                                            <div class="partner-rating">
                                                <span class="stars">★★★★★</span>
                                                <span class="rating-text">4.9/5</span>
                                            </div>
                                            <div class="partner-benefits">
                                                <span class="benefit">Produits frais</span>
                                                <span class="benefit">Café premium</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Contrôles du carrousel -->
                            <div class="carousel-controls">
                                <button class="carousel-btn prev" onclick="previousPartner()">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div class="carousel-indicators" id="carousel-indicators">
                                    <span class="indicator active" data-slide="0"></span>
                                    <span class="indicator" data-slide="1"></span>
                                    <span class="indicator" data-slide="2"></span>
                                    <span class="indicator" data-slide="3"></span>
                                </div>
                                <button class="carousel-btn next" onclick="nextPartner()">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Catégories -->
                    <div class="shop-categories">
                        <h3>Catégories</h3>
                        <div class="category-grid">
                            <div class="category-item">
                                <div class="category-icon">
                                    <img src="./assets/restauration.jpg" alt="Restauration" class="category-image">
                                </div>
                                <span>Restauration</span>
                            </div>
                            <div class="category-item">
                                <div class="category-icon">
                                    <img src="./assets/logos/shopping.png" alt="Shopping" class="category-image">
                                </div>
                                <span>Shopping</span>
                            </div>
                            <div class="category-item">
                                <div class="category-icon">
                                    <img src="./assets/logos/loisirs.jpg" alt="Loisirs" class="category-image">
                                </div>
                                <span>Loisirs</span>
                            </div>
                        </div>
                    </div>

                    <!-- Liste des partenaires -->
                    <div class="partners-section">
                        <h3>Nos partenaires</h3>
                        <div class="partners-list">
                            <div class="partner-item" onclick="openPartner('ckdo')">
                                <img src="assets/logos/ckdo-logo.png" alt="CKDO" class="partner-logo">
                                <div class="partner-info">
                                    <h4>CKDO Gabon</h4>
                                    <p>Supermarché & Shopping</p>
                                    <span class="partner-badge">-15% avec K-Bank</span>
                                </div>
                            </div>
                            <!-- Autres partenaires... -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page Coffre-Fort -->
            <div class="page vault-page" id="coffre-fort-page">
                
                <!-- Carousel des coffres-forts -->
                <div class="vault-carousel-container">
                    <div class="vault-carousel" id="vault-carousel">
                        <!-- Les coffres-forts seront générés dynamiquement -->
                    </div>
                    
                    <!-- Indicateurs de pagination -->
                    <div class="vault-indicators" id="vault-indicators">
                        <!-- Les points d'indication seront générés dynamiquement -->
                    </div>
                    
                    <!-- Boutons de navigation -->
                    <button class="vault-nav-btn vault-nav-prev" id="vault-prev" onclick="previousVault()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="vault-nav-btn vault-nav-next" id="vault-next" onclick="nextVault()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <!-- Actions du coffre -->
                <div class="quick-actions">
                    <div class="action-card" onclick="openVaultDepositModal()">
                        <div class="action-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div class="action-label">Déposer</div>
                    </div>
                    <div class="action-card" onclick="openVaultWithdrawModal()">
                        <div class="action-icon">
                            <i class="fas fa-minus-circle"></i>
                        </div>
                        <div class="action-label">Retirer</div>
                    </div>
                    <div class="action-card" onclick="openVaultAddGoalModal()">
                        <div class="action-icon">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <div class="action-label">Objectif</div>
                    </div>
                    <div class="action-card" onclick="openNewVaultModal()">
                        <div class="action-icon">
                            <i class="fas fa-vault"></i>
                        </div>
                        <div class="action-label">Nouveau coffre</div>
                    </div>
                </div>

                <!-- Section objectif d'épargne (un seul) -->
                <div class="vault-goal-section">
                    <div class="section-header">
                        <h3>Mon objectif d'épargne</h3>
                        <a onclick="openVaultAddGoalModal()" id="add-goal-link">Ajouter</a>
                    </div>
                    <div class="vault-goal-container" id="vault-goal-container">
                        <!-- L'objectif d'épargne sera généré dynamiquement -->
                        <div class="no-goal-message" id="no-goal-message">
                            <i class="fas fa-bullseye" style="font-size: 48px; color: rgba(255,255,255,0.3); margin-bottom: 15px;"></i>
                            <p>Aucun objectif défini</p>
                            <p style="font-size: 14px; opacity: 0.7;">Ajoutez un objectif pour mieux épargner</p>
                        </div>
                    </div>
                </div>

                <!-- Sections historiques -->
                <div class="vault-history-sections" style="margin-bottom: 100px;">
                    <!-- Historique des dépôts -->
                    <div class="transactions-section">
                        <div class="section-header">
                            <h3><i class="fas fa-arrow-down" style="color: #22c55e; margin-right: 8px;"></i>Dépôts récents</h3>
                            <a onclick="showAllVaultDeposits()">Tout voir</a>
                        </div>
                        <div class="transactions-list" id="vault-deposits-list">
                            <!-- L'historique des dépôts sera généré dynamiquement -->
                        </div>
                    </div>

                    <!-- Historique des retraits -->
                    <div class="transactions-section" style="margin-top: 20px;">
                        <div class="section-header">
                            <h3><i class="fas fa-arrow-up" style="color: #ef4444; margin-right: 8px;"></i>Retraits récents</h3>
                            <a onclick="showAllVaultWithdrawals()">Tout voir</a>
                        </div>
                        <div class="transactions-list" id="vault-withdrawals-list">
                            <!-- L'historique des retraits sera généré dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modals pour le coffre-fort -->
            
            <!-- Modal de dépôt -->
            <div class="vault-modal-overlay" id="vault-deposit-modal">
                <div class="vault-modal-content">
                    <div class="vault-modal-header">
                        <h3 class="vault-modal-title">Déposer dans le coffre-fort</h3>
                        <button class="vault-modal-close" onclick="closeVaultDepositModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Montant à déposer</label>
                        <div class="vault-amount-input">
                            <span class="vault-currency-symbol">F</span>
                            <input type="number" placeholder="0,00" id="vault-deposit-amount">
                        </div>
                    </div>
                    
                    <div class="vault-quick-amounts">
                        <div class="vault-quick-amount" onclick="setVaultQuickAmount(50000)"><span class="currency-symbol">F</span><span class="currency-code">cfa</span> 50 000</div>
                        <div class="vault-quick-amount" onclick="setVaultQuickAmount(100000)"><span class="currency-symbol">F</span><span class="currency-code">cfa</span> 100 000</div>
                        <div class="vault-quick-amount" onclick="setVaultQuickAmount(200000)"><span class="currency-symbol">F</span><span class="currency-code">cfa</span> 200 000</div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Compte source</label>
                        <div class="vault-input-field">
                            <select id="vault-deposit-source">
                                <option value="main">Compte principal (<span class="currency-symbol">F</span><span class="currency-code">cfa</span> 780 245)</option>
                                <option value="professional">Compte professionnel (<span class="currency-symbol">F</span><span class="currency-code">cfa</span> 450 800)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Objectif d'épargne (optionnel)</label>
                        <div class="vault-input-field">
                            <select id="vault-deposit-goal">
                                <option value="">Aucun objectif spécifique</option>
                                <option value="vacation">Vacances</option>
                                <option value="car">Nouvelle voiture</option>
                                <option value="house">Achat immobilier</option>
                            </select>
                        </div>
                    </div>
                    
                    <button class="vault-primary-button" onclick="confirmVaultDeposit()">
                        <i class="fas fa-lock"></i> Déposer en sécurité
                    </button>
                </div>
            </div>

            <!-- Modal de retrait -->
            <div class="vault-modal-overlay" id="vault-withdraw-modal">
                <div class="vault-modal-content">
                    <div class="vault-modal-header">
                        <h3 class="vault-modal-title">Retirer du coffre-fort</h3>
                        <button class="vault-modal-close" onclick="closeVaultWithdrawModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Montant à retirer</label>
                        <div class="vault-amount-input">
                            <span class="vault-currency-symbol">F</span>
                            <input type="number" placeholder="0,00" id="vault-withdraw-amount">
                        </div>
                    </div>
                    
                    <div class="vault-quick-amounts">
                        <div class="vault-quick-amount" onclick="setVaultQuickWithdrawAmount(50000)"><span class="currency-symbol">F</span><span class="currency-code">cfa</span> 50 000</div>
                        <div class="vault-quick-amount" onclick="setVaultQuickWithdrawAmount(100000)"><span class="currency-symbol">F</span><span class="currency-code">cfa</span> 100 000</div>
                        <div class="vault-quick-amount" onclick="setVaultQuickWithdrawAmount(200000)"><span class="currency-symbol">F</span><span class="currency-code">cfa</span> 200 000</div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Compte de destination</label>
                        <div class="vault-input-field">
                            <select id="vault-withdraw-destination">
                                <option value="main">Compte principal</option>
                                <option value="professional">Compte professionnel</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Motif de retrait (optionnel)</label>
                        <div class="vault-input-field">
                            <input type="text" placeholder="Raison du retrait" id="vault-withdraw-reason">
                        </div>
                    </div>
                    
                    <button class="vault-primary-button" onclick="confirmVaultWithdrawal()">
                        <i class="fas fa-unlock"></i> Retirer des fonds
                    </button>
                </div>
            </div>

            <!-- Modal d'ajout d'objectif -->
            <div class="vault-modal-overlay" id="vault-add-goal-modal">
                <div class="vault-modal-content">
                    <div class="vault-modal-header">
                        <h3 class="vault-modal-title">Nouvel objectif d'épargne</h3>
                        <button class="vault-modal-close" onclick="closeVaultAddGoalModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Nom de l'objectif</label>
                        <div class="vault-input-field">
                            <input type="text" placeholder="Ex: Vacances à Paris" id="vault-goal-name">
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Montant cible</label>
                        <div class="vault-amount-input">
                            <span class="vault-currency-symbol">F</span>
                            <input type="number" placeholder="0,00" id="vault-goal-target">
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Date cible</label>
                        <div class="vault-input-field">
                            <input type="date" id="vault-goal-date">
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Icône de l'objectif</label>
                        <div class="vault-quick-amounts">
                            <div class="vault-quick-amount" onclick="selectVaultGoalIcon('plane')">
                                <i class="fas fa-plane"></i> Voyage
                            </div>
                            <div class="vault-quick-amount" onclick="selectVaultGoalIcon('car')">
                                <i class="fas fa-car"></i> Voiture
                            </div>
                            <div class="vault-quick-amount" onclick="selectVaultGoalIcon('home')">
                                <i class="fas fa-home"></i> Maison
                            </div>
                        </div>
                    </div>
                    
                    <button class="vault-primary-button" onclick="addVaultSavingsGoal()">
                        <i class="fas fa-bullseye"></i> Créer l'objectif
                    </button>
                </div>
            </div>

            <!-- Modal de création d'un nouveau coffre-fort -->
            <div class="vault-modal-overlay" id="new-vault-modal">
                <div class="vault-modal-content">
                    <div class="vault-modal-header">
                        <h3 class="vault-modal-title">Créer un nouveau coffre-fort</h3>
                        <button class="vault-modal-close" onclick="closeNewVaultModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="vault-info-message">
                        <i class="fas fa-info-circle"></i>
                        <p>Vous pouvez créer jusqu'à 2 coffres-forts supplémentaires pour mieux organiser votre épargne.</p>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Nom du coffre-fort</label>
                        <div class="vault-input-field">
                            <input type="text" placeholder="Ex: Épargne Voyage" id="new-vault-name">
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Description (optionnel)</label>
                        <div class="vault-input-field">
                            <input type="text" placeholder="Ex: Pour mes prochaines vacances" id="new-vault-description">
                        </div>
                    </div>
                    
                    <div class="vault-input-group">
                        <label>Icône du coffre-fort</label>
                        <div class="vault-icon-grid">
                            <div class="vault-icon-option" onclick="selectVaultIcon('vault')" data-icon="vault">
                                <i class="fas fa-vault"></i>
                            </div>
                            <div class="vault-icon-option" onclick="selectVaultIcon('piggy-bank')" data-icon="piggy-bank">
                                <i class="fas fa-piggy-bank"></i>
                            </div>
                            <div class="vault-icon-option" onclick="selectVaultIcon('coins')" data-icon="coins">
                                <i class="fas fa-coins"></i>
                            </div>
                            <div class="vault-icon-option" onclick="selectVaultIcon('gem')" data-icon="gem">
                                <i class="fas fa-gem"></i>
                            </div>
                            <div class="vault-icon-option" onclick="selectVaultIcon('trophy')" data-icon="trophy">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="vault-icon-option" onclick="selectVaultIcon('star')" data-icon="star">
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                    </div>
                    
                    <button class="vault-primary-button" onclick="createNewVault()">
                        <i class="fas fa-plus"></i> Créer le coffre-fort
                    </button>
                </div>
            </div>

            <!-- Autres pages... -->
        </div>

        <!-- Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="switchTab('home')">
                <i class="fas fa-home"></i>
                <span>Accueil</span>
            </div>
            <div class="nav-item" onclick="switchTab('virement')">
                <i class="fas fa-paper-plane"></i>
                <span>Virements</span>
            </div>
            <div class="nav-item" onclick="switchTab('coffre-fort')">
                <i class="fas fa-key"></i>
                <span>Coffre-fort</span>
            </div>
            <div class="nav-item" onclick="switchTab('others')">
                <i class="fas fa-ellipsis-h"></i>
                <span>Autres</span>
            </div>
        </div>
    </div>

    <!-- Bibliothèque pour génération PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Fallback si le CDN principal ne fonctionne pas
        if (!window.jsPDF) {
            document.write('<script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"><\/script>');
        }
    </script>
    <script src="script.js"></script>
    
    <!-- Script de test pour les icônes -->
    <script>
        function forceShowBlockedIcon() {
            console.log('=== FORCE SHOW BLOCKED ICON ===');
            const blockedIcon = document.getElementById('blocked-icon');
            const container = document.getElementById('card-status-indicator');
            
            if (blockedIcon && container) {
                // Force tous les styles possibles
                blockedIcon.style.cssText = `
                    display: flex !important; 
                    visibility: visible !important; 
                    opacity: 1 !important; 
                    z-index: 999999 !important; 
                    position: relative !important;
                    width: 80px !important;
                    height: 80px !important;
                    border-radius: 50% !important;
                    background: red !important;
                    border: 5px solid yellow !important;
                    justify-content: center !important;
                    align-items: center !important;
                    box-shadow: 0 0 20px rgba(255,0,0,0.8) !important;
                `;
                
                container.style.cssText = `
                    position: absolute !important; 
                    top: 50% !important; 
                    left: 50% !important; 
                    transform: translate(-50%, -50%) !important; 
                    z-index: 999999 !important; 
                    display: block !important;
                    visibility: visible !important;
                    opacity: 1 !important;
                `;
                
                console.log('Icône forcée avec styles maximaux');
                console.log('Rect blockedIcon:', blockedIcon.getBoundingClientRect());
            } else {
                console.error('Éléments manquants:', { blockedIcon, container });
            }
        }
        
        function testBlockedIconSimple() {
            console.log('=== TEST SIMPLE BLOCKED ICON ===');
            const blockedIcon = document.getElementById('blocked-icon');
            if (blockedIcon) {
                blockedIcon.style.display = 'flex';
                console.log('Blocked icon forcé à display: flex');
            } else {
                console.error('blocked-icon pas trouvé !');
            }
        }
        
        function testFrozenIconSimple() {
            console.log('=== TEST SIMPLE FROZEN ICON ===');
            const frozenIcon = document.getElementById('frozen-icon');
            if (frozenIcon) {
                frozenIcon.style.display = 'flex';
                console.log('Frozen icon forcé à display: flex');
            } else {
                console.error('frozen-icon pas trouvé !');
            }
        }
        
        // Attendre que la page soit chargée
        window.addEventListener('DOMContentLoaded', function() {
            console.log('Page chargée - tests disponibles: forceShowBlockedIcon(), testBlockedIconSimple(), testFrozenIconSimple()');
        });
    </script>
</body>
</html>